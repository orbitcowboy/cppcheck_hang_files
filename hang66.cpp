struct A { template <class T> class B {}; }; template <template <class> class TT> struct X { TT<int> y; }; template <class T> struct X<T::template B> { T z; }; template <class T> struct X<T::template B>{ { T z; }; template <class T> struct C { X<T::template B> x;} }; int main() { C<A> c; } struct A { template < class T > class B { } ; } ; template < template < class > class TT > struct X { TT < int > y ; } ; template < class T > struct X < T : : template B > { T z ; } ; template < class T > struct X < T : : template B > { T z ; } ; template < class T > struct C { X < T : : template< B >> x ; } ; int main ( ) { C < A > c ; }  